<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SSE</title>
</head>
<body>

    <h1>Server-Sent Events Client</h1>

    <ul id="messages">

    </ul>


    <script>
        const eventSource = new EventSource("https://localhost:7285/sse");
        const messagesList = document.getElementById("messages");

        eventSource.onmessage = (event) => {
            console.log(event.data);

            const messageItem = document.createElement("li");
            messageItem.textContent = event.data;
            messagesList.appendChild(messageItem);

            // Automatyczne przewijanie na koniec listy
            messagesList.scrollTo = messagesList.scrollHeight;
        };

        eventSource.onopen = () => {
            console.log("Connected.")
        };
    </script>

</body>
</html>